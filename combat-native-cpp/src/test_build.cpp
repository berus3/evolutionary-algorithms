#include <iostream>
#include <vector>
#include "team.hpp"
#include "player.hpp"
#include "combat_engine.hpp"

// Declarada en combat_jni.cpp:
Team* buildTeamFromGenome(const int* genome);

static constexpr int STATS_PER_PLAYER = 43;
static constexpr int PLAYERS_PER_TEAM = 5;
static constexpr int DECISIONS_PER_PLAYER = 100;

// imprimir player
void printPlayerStats(Player* p) {
    StatPoints* sp = p->getStatPoints();

    std::cout << "---- PLAYER " << p->getId() << " ----\n";

    int* arr = reinterpret_cast<int*>(sp);
    int sum = 0;

    for (int i = 0; i < STATS_PER_PLAYER; i++) {
        std::cout << "stat[" << i << "] = " << arr[i] << "\n";
        sum += arr[i];
    }

    std::cout << "TOTAL POINTS = " << sum << "\n\n";
}

int main() {
    // genome total: 5 players Ã— 100 decisiones = 500 ints
	// std::vector<int> genome(PLAYERS_PER_TEAM * DECISIONS_PER_PLAYER);

	/*
    for (int i = 0; i < genome.size(); i++) {
        genome[i] = 0;
    }
	*/
	
	std::vector<int> genome = {
	19,14,3,36,1,23,7,27,2,41,
	9,12,5,8,33,11,0,42,6,17,
	29,4,35,31,10,20,13,26,21,30,
	16,18,24,32,15,22,25,34,28,14,
	7,19,3,36,12,5,27,33,1,9,
	23,6,11,41,8,2,17,29,4,10,
	35,31,20,13,0,26,21,30,16,24,
	18,32,15,22,34,25,28,14,7,19,
	36,3,5,12,27,33,9,1,6,23,
	11,41,2,8,29,17,10,4,31,35,
	13,20,26,0,30,21,24,16,32,18,
	22,15,25,34,14,28,19,7,3,36,
	12,5,33,27,1,9,23,6,41,11,
	8,2,17,29,10,4,35,31,13,20,
	0,26,30,21,16,24,18,32,22,15,
	34,25,28,14,7,19,36,3,12,5,
	27,33,9,1,23,6,11,41,2,8,
	29,17,4,10,31,35,13,20,26,0,
	21,30,16,24,32,18,15,22,25,34,
	28,14,19,7,3,36,5,12,33,27,
	1,9,6,23,41,11,8,2,29,17,
	10,4,31,35,20,13,0,26,30,21,
	24,16,18,32,22,15,34,25,14,28,
	7,19,36,3,12,5,27,33,9,1,
	23,6,11,41,2,8,29,17,10,4,
	35,31,13,20,0,26,21,30,24,16,
	18,32,22,15,25,34,28,14,19,7,
	3,36,12,5,27,33,9,1,6,23,
	11,41,2,8,17,29,10,4,31,35,
	13,20,26,0,21,30,16,24,18,32,
	22,15,34,25,14,28,19,7,3,36,
	12,5,27,33,9,1,23,6,41,11,
	8,2,29,17,10,4,35,31,13,20,
	26,0,21,30,16,24,32,18,15,22,
	25,34,14,28,19,7,3,36,12,5,
	27,33,1,9,6,23,11,41,2,8,
	29,17,10,4,31,35,20,13,26,0,
	30,21,16,24,18,32,22,15,25,34,
	28,14,7,19,36,3,12,5,27,33,
	9,1,23,6,11,41,2,8,29,17,
	10,4,31,35,13,20,26,0,30,21,
	24,16,18,32,22,15,34,25,14,28,
	19,7,3,36,12,5,27,33,9,1,
	23,6,11,41,2,8,29,17,10,4,
	35,31,20,13,0,26,21,30,16,24,
	32,18,22,15,25,34,14,28,7,19,
	3,36,12,5,27,33,1,9,23,6,
	41,11,8,2,29,17,10,4,31,35,
	13,20,26,0,21,30,24,16,18,32,
	22,15,25,34,14,28,19,7,3,36,
	12,5,27,33,9,1,6,23,11,41,
	2,8,29,17,10,4,31,35,13,20,
	0,26,30,21,16,24,18,32,22,15,
	34,25,14,28,19,7,3,36,12,5,
	27,33,9,1,23,6,11,41,2,8,
	29,17,10,4,31,35,13,20,0,26,
	21,30,16,24,18,32,22,15,25,34,
	14,28,19,7,3,36,12,5,27,33,
	9,1,23,6,11,41,2,8,29,17,
	10,4,31,35,13,20,26,0,30,21,
	24,16,18,32,22,15,25,34,14,28
};
  

    Team* t = buildTeamFromGenome(genome.data());

    std::cout << "\n=========================\n";
    std::cout << "   RESULTADO DEL TEAM\n";
    std::cout << "=========================\n\n";

    for (int p = 0; p < PLAYERS_PER_TEAM; p++) {
        printPlayerStats(t->getPlayer(p));
    }

    delete t;
    return 0;
}
